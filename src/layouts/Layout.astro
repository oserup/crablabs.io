---
import NavBar from "../components/NavBar.astro";
import Footer from "../components/Footer.astro";
import CookieBanner from "../components/CookieBanner.astro";
import "../styles/global.css";

// interface type-check properties
interface Props {
	title: string;
	description?: string;
	image?: string;
	canonical?: string;
	noindex?: boolean;
	type?: string;
}

// links for nav bar
const links = [
	{
		text: "Home",
		href: "/",
	},
	{
		text: "About Us",
		href: "/about",
	},
	{
		text: "Services",
		href: "/services",
	},
	{
		text: "Capabilities",
		href: "/capabilities",
	},
	{
		text: "Case Studies",
		href: "/case-studies",
	},
	{
		text: "Blog",
		href: "/blog",
	},
	{
		text: "Careers",
		href: "/careers",
	},
	{
		text: "Contact Us",
		href: "/contact",
	},
	{
		text: "Get a Quote",
		href: "/quote",
	},
];

const {
	title,
	description = "5 senior electronics engineers, 30+ years experience. Direct access PCB design, embedded firmware, medical device compliance. Fixed-price projects $1k-$100k. No middlemen, Long Beach CA.",
	image = "https://crablabs.io/android-chrome-512x512.png",
	canonical,
	noindex = false,
	type = "website"
} = Astro.props;

const currentUrl = canonical || new URL(Astro.url.pathname, Astro.site).href;
---

<!-- HTML layout -->
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="keywords" content="senior electronics engineers, direct engineer access PCB design, medical device engineering Long Beach, embedded systems consulting, IEC 60601 compliance, FDA device development, industrial automation engineering, scientific instrument design, fixed price electronics projects, regulatory compliant embedded systems, EMC testing Long Beach" />
		<meta name="robots" content={noindex ? "noindex, nofollow" : "index, follow"} />
		<meta name="author" content="Crab Labs LLC" />
		<meta name="publisher" content="Crab Labs LLC" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="format-detection" content="telephone=yes" />
		<meta name="geo.region" content="US-CA" />
		<meta name="geo.placename" content="Long Beach, California" />
		<meta name="geo.position" content="33.7701;-118.1937" />
		<meta name="ICBM" content="33.7701, -118.1937" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
		<link rel="manifest" href="/site.webmanifest" />
		<meta name="generator" content={Astro.generator} />

		<!-- Canonical URL -->
		<link rel="canonical" href={currentUrl} />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content={type} />
		<meta property="og:url" content={currentUrl} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={image} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:site_name" content="Crab Labs" />
		<meta property="og:locale" content="en_US" />

		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content={currentUrl} />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={image} />
		<meta name="twitter:site" content="@crablabs" />
		<meta name="twitter:creator" content="@crablabs" />

		<!-- Additional SEO -->
		<meta name="theme-color" content="#ea580c" />
		<meta name="msapplication-TileColor" content="#ea580c" />
		<meta name="application-name" content="Crab Labs" />

		<!-- RSS Feed -->
		<link rel="alternate" type="application/rss+xml" title="Crab Labs Blog" href="/rss.xml" />

		<!-- Sitemap -->
		<link rel="sitemap" href="/sitemap-index.xml" />
	<!-- Google tag (gtag.js) -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=G-VS3TXE9GHY"
		></script>
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());
			gtag("config", "G-VS3TXE9GHY", {
				'anonymize_ip': true,
				'cookie_flags': 'SameSite=None;Secure'
			});
		</script>
		<!-- Analytics Tracking Code -->
		<script
			is:inline
			async
			src="https://cdn.jsdelivr.net/gh/leadinglydevelopment/pixel-tracking@latest/pixel.js"
			data-site-id="crablabs.io"
			data-user-id="1741290011679_18954e29-5214-4eea-89ec-8a8d7f7cfafe"
		></script>
	<title>{title}</title>
	</head>
	<div class="flex flex-col h-screen">
		<NavBar links={links} />
		<div class="flex-grow">
			<slot />
		</div>
		<Footer />
		<CookieBanner />
	</div>

	<!-- <div class="flex flex-col h-screen">
		<div class="bg-red-500">header</div>
		<div class="bg-green-500 flex-grow">content</div>
		<div class="bg-blue-500">footer</div>
	</div> -->

	<!-- Preline UI script -->
	<script src="../../node_modules/preline/dist/preline.js"></script>

	<!-- CSS -->
	<style is:global>
		html {
			background: #ffffff;
		}
	</style>


</html>
