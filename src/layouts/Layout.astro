---
import "@fontsource-variable/oxanium";
import NavBar from "../components/NavBar.astro";
import Footer from "../components/Footer.astro";
import CookieBanner from "../components/CookieBanner.astro";

// interface type-check properties
interface Props {
	title: string;
	description?: string;
	image?: string;
	canonical?: string;
	noindex?: boolean;
	type?: string;
}

// links for nav bar
const links = [
	{
		text: "Home",
		href: "/",
	},
	{
		text: "About Us",
		href: "/about",
	},
	{
		text: "Services",
		href: "/services",
	},
	{
		text: "Blog",
		href: "/blog",
	},
	{
		text: "Careers",
		href: "/careers",
	},
	{
		text: "Contact Us",
		href: "/contact",
	},
	{
		text: "Get a Quote",
		href: "/quote",
	},
];

const {
	title,
	description = "SME-focused electronics engineering. PCB design, embedded firmware, medical device compliance. $2.5k-$250k projects. Direct engineer access, no middlemen. 25+ years experience building products that work.",
	image = "https://crablabs.io/logo.svg",
	canonical,
	noindex = false,
	type = "website"
} = Astro.props;

const currentUrl = canonical || new URL(Astro.url.pathname, Astro.site).href;
---

<!-- HTML layout -->
<!doctype html>
<html lang="en" class="dark">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="keywords" content="PCB design services, embedded firmware development, electronic product development, medical device engineering, biomedical electronics design, robotics electronics, custom PCB design, embedded systems consulting, electronics engineering services, FCC compliance testing, IEC 60601 medical devices, Long Beach electronics engineering" />
		<meta name="robots" content={noindex ? "noindex, nofollow" : "index, follow"} />
		<meta name="author" content="Crab Labs" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<meta name="generator" content={Astro.generator} />

		<!-- Canonical URL -->
		<link rel="canonical" href={currentUrl} />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content={type} />
		<meta property="og:url" content={currentUrl} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={image} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:site_name" content="Crab Labs" />
		<meta property="og:locale" content="en_US" />

		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content={currentUrl} />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={image} />
		<meta name="twitter:site" content="@crablabs" />
		<meta name="twitter:creator" content="@crablabs" />

		<!-- Additional SEO -->
		<meta name="theme-color" content="#ea580c" />
		<meta name="msapplication-TileColor" content="#ea580c" />
		<meta name="application-name" content="Crab Labs" />

		<!-- RSS Feed -->
		<link rel="alternate" type="application/rss+xml" title="Crab Labs Blog" href="/rss.xml" />

		<!-- Sitemap -->
		<link rel="sitemap" href="/sitemap-index.xml" />
	<!-- Google tag (gtag.js) -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=G-VS3TXE9GHY"
		></script>
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
			dataLayer.push(arguments);
			}
			gtag("js", new Date());
	
			gtag("config", "G-VS3TXE9GHY");
		</script>
		<!-- Analytics Tracking Code -->
		<script 
			async 
			src="https://cdn.jsdelivr.net/gh/leadinglydevelopment/pixel-tracking@latest/pixel.js" 
			data-site-id="crablabs.io"
			data-user-id="1741290011679_18954e29-5214-4eea-89ec-8a8d7f7cfafe"
		></script>
	<title>{title}</title>
	</head>
	<div class="flex flex-col h-screen">
		<NavBar links={links} />
		<div class="flex-grow">
			<slot />
		</div>
		<Footer />
		<CookieBanner />
	</div>

	<!-- <div class="flex flex-col h-screen">
		<div class="bg-red-500">header</div>
		<div class="bg-green-500 flex-grow">content</div>
		<div class="bg-blue-500">footer</div>
	</div> -->

	<!-- Preline UI script -->
	<script src="../../node_modules/preline/dist/preline.js"></script>

	<!-- CSS -->
	<style is:global>
		html {
			background: #13151a;
		}
	</style>


</html>
