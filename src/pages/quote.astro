---
import Container from "../components/Container.astro";
import Layout from "../layouts/Layout.astro";
import { company } from "../config/company";

const service = Astro.url.searchParams.get('service') || '';
---

<Layout title="Get a Quote - Fixed-Price Electronics Engineering | Crab Labs Long Beach"
    description="Fixed-price quotes within 24 hours. PCB design, firmware, compliance projects $1k-$100k. You own all IP from day one. Senior engineers, no middlemen."
>
  <style>
    /* ==========================================
       FORM LAYOUT
       ========================================== */
    .quote-container {
      max-width: 640px;
      margin: 0 auto;
    }

    .alt-contact {
      margin-top: 1.5rem;
      text-align: center;
      font-size: 0.8125rem;
      color: var(--neutral-500);
    }

    .alt-contact a {
      color: var(--brand-600);
      text-decoration: none;
    }

    .alt-contact a:hover {
      text-decoration: underline;
    }
  </style>

  <!-- Page Header -->
  <section class="section section-gray section-first">
    <Container>
      <div class="section-header">
        <div class="section-label">Quote</div>
        <h1 class="section-title">Get a quote</h1>
        <p class="section-subtitle">Fixed-price quotes within 24 hours.</p>
      </div>
    </Container>
  </section>

  <!-- Quote Form -->
  <section class="section section-white">
    <Container>
      <div class="quote-container">
        <div class="form-card">
          <form
            action="https://usebasin.com/f/00c426b2708e"
            method="POST"
            data-form-handler='{"loadingText":"Submitting...","successText":"Request Sent","defaultText":"Submit Request"}'
          >
            <div class="form-row form-row-2 form-group">
              <div>
                <label for="name" class="form-label">Name *</label>
                <input type="text" name="name" id="name" class="form-input" placeholder="John Smith" required />
              </div>
              <div>
                <label for="company" class="form-label">Company *</label>
                <input type="text" name="company" id="company" class="form-input" placeholder="Acme Corp" required />
              </div>
            </div>

            <div class="form-row form-row-2 form-group">
              <div>
                <label for="email" class="form-label">Email *</label>
                <input type="email" name="email" id="email" class="form-input" placeholder="john@acme.com" required />
              </div>
              <div>
                <label for="phone" class="form-label">Phone (optional)</label>
                <input type="tel" name="phone" id="phone" class="form-input" placeholder="+1 (555) 123-4567" />
              </div>
            </div>

            <div class="form-group">
              <label for="service-type" class="form-label">Service</label>
              <select name="service-type" id="service-type" class="form-select">
                <option value="" selected={!service}>Select a service...</option>
                <option value="product-development" selected={service === 'product-development'}>Product Development</option>
                <option value="design-review" selected={service === 'design-review'}>Design Review</option>
                <option value="design-retooling" selected={service === 'design-retooling'}>Design Retooling</option>
                <option value="reverse-engineering" selected={service === 'reverse-engineering'}>Reverse Engineering</option>
                <option value="testing-compliance" selected={service === 'testing-compliance'}>Testing & Compliance</option>
                <option value="team-augmentation" selected={service === 'team-augmentation'}>Team Augmentation</option>
                <option value="other">Other / Not Sure</option>
              </select>
            </div>

            <div class="form-group">
              <label for="project-description" class="form-label">What are you building? *</label>
              <textarea name="project-description" id="project-description" rows="5" class="form-textarea" placeholder="Describe your project: function, requirements, compliance needs, timeline..." required></textarea>
              <p class="form-hint">Include budget range and timeline if known</p>
            </div>

            <div class="form-group">
              <label for="budget" class="form-label">Budget range (optional)</label>
              <select name="budget" id="budget" class="form-select">
                <option value="">Prefer to discuss</option>
                <option value="1k-5k">$1k - $5k</option>
                <option value="5k-10k">$5k - $10k</option>
                <option value="10k-25k">$10k - $25k</option>
                <option value="25k-50k">$25k - $50k</option>
                <option value="50k-100k">$50k - $100k</option>
                <option value="over-100k">$100k+</option>
              </select>
            </div>

            <input type="hidden" name="source" value="quote-form" />

            <button type="submit" class="form-submit">
              <span data-btn-text>Submit Request</span>
              <svg data-btn-icon fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18 6-6-6-6"></path>
              </svg>
              <svg data-spinner class="animate-spin hidden" fill="none" viewBox="0 0 24 24" aria-hidden="true">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
              </svg>
            </button>

            <div data-success class="form-message form-message-success hidden">
              Quote request received. We'll respond within 24 hours with a fixed-price proposal.
            </div>

            <div data-error class="form-message form-message-error hidden">
              Something went wrong. Email us directly at <a href="mailto:contact@crablabs.io">contact@crablabs.io</a>
            </div>
          </form>

          <div class="next-steps">
            <div class="next-steps-title">What happens next</div>
            <div class="next-steps-list">
              <div class="next-steps-item"><span class="next-steps-num">1.</span> We review your request within 4 hours</div>
              <div class="next-steps-item"><span class="next-steps-num">2.</span> If it's a fit, we schedule a brief call</div>
              <div class="next-steps-item"><span class="next-steps-num">3.</span> You receive a fixed-price proposal within 24 hours</div>
            </div>
          </div>
        </div>

        <div class="alt-contact">
          Prefer to talk first? <a href={company.links.consultation}>Schedule a call</a> or phone <a href={company.contact.phoneHref}>{company.contact.phone}</a>
        </div>

      </div>
    </Container>
  </section>

  <script>
    import '../scripts/form-handler';
  </script>
</Layout>
