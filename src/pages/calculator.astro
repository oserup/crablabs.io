---
import Layout from '../layouts/Layout.astro';
import Container from '../components/Container.astro';
---

<Layout
  title="PCB Project Cost Calculator | Estimate Your Hardware Development Budget"
  description="Quick cost estimator for PCB design and embedded systems projects. Get ballpark pricing for biomedical and industrial hardware development."
>
  <Container>
    <div class="py-16 md:py-24">

      <!-- Header -->
      <div class="text-center mb-16">
        <h1 class="text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-6">
          PCB Project Cost Calculator
        </h1>
        <p class="text-xl text-slate-700 dark:text-slate-300 max-w-3xl mx-auto leading-relaxed">
          Get a quick estimate for your hardware development project. This calculator provides ballpark pricing based on project complexity and scope.
        </p>
      </div>

      <!-- Calculator -->
      <div class="max-w-4xl mx-auto">
        <div class="bg-white dark:bg-slate-900 rounded-2xl p-8 border-2 border-slate-200 dark:border-slate-700 shadow-lg">

          <!-- Project Type -->
          <div class="mb-8">
            <label class="block text-lg font-bold text-slate-900 dark:text-white mb-4">
              Project Type
            </label>
            <div class="grid md:grid-cols-3 gap-4">
              <label class="cursor-pointer">
                <input type="radio" name="projectType" value="simple" class="project-type sr-only">
                <div class="p-4 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-orange-500 transition-colors option-card">
                  <h3 class="font-bold text-slate-900 dark:text-white mb-2">Simple Controller</h3>
                  <p class="text-sm text-slate-600 dark:text-slate-400">Basic I/O, simple sensors, minimal processing</p>
                </div>
              </label>
              <label class="cursor-pointer">
                <input type="radio" name="projectType" value="moderate" class="project-type sr-only">
                <div class="p-4 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-orange-500 transition-colors option-card">
                  <h3 class="font-bold text-slate-900 dark:text-white mb-2">Moderate Complexity</h3>
                  <p class="text-sm text-slate-600 dark:text-slate-400">Multiple sensors, processing, communication</p>
                </div>
              </label>
              <label class="cursor-pointer">
                <input type="radio" name="projectType" value="complex" class="project-type sr-only">
                <div class="p-4 border-2 border-slate-200 dark:border-slate-700 rounded-lg hover:border-orange-500 transition-colors option-card">
                  <h3 class="font-bold text-slate-900 dark:text-white mb-2">Complex System</h3>
                  <p class="text-sm text-slate-600 dark:text-slate-400">High-speed signals, advanced processing, multiple protocols</p>
                </div>
              </label>
            </div>
          </div>

          <!-- Features -->
          <div class="mb-8">
            <label class="block text-lg font-bold text-slate-900 dark:text-white mb-4">
              Required Features
            </label>
            <div class="grid md:grid-cols-2 gap-4">
              <label class="flex items-center cursor-pointer">
                <input type="checkbox" name="features" value="wireless" class="feature-checkbox">
                <span class="ml-3 text-slate-700 dark:text-slate-300">Wireless Connectivity (WiFi, BLE, Cellular)</span>
              </label>
              <label class="flex items-center cursor-pointer">
                <input type="checkbox" name="features" value="battery" class="feature-checkbox">
                <span class="ml-3 text-slate-700 dark:text-slate-300">Battery Powered Operation</span>
              </label>
              <label class="flex items-center cursor-pointer">
                <input type="checkbox" name="features" value="medical" class="feature-checkbox">
                <span class="ml-3 text-slate-700 dark:text-slate-300">Medical Device Compliance</span>
              </label>
              <label class="flex items-center cursor-pointer">
                <input type="checkbox" name="features" value="industrial" class="feature-checkbox">
                <span class="ml-3 text-slate-700 dark:text-slate-300">Industrial Environment Rating</span>
              </label>
              <label class="flex items-center cursor-pointer">
                <input type="checkbox" name="features" value="enclosure" class="feature-checkbox">
                <span class="ml-3 text-slate-700 dark:text-slate-300">Custom Enclosure Design</span>
              </label>
              <label class="flex items-center cursor-pointer">
                <input type="checkbox" name="features" value="testing" class="feature-checkbox">
                <span class="ml-3 text-slate-700 dark:text-slate-300">Comprehensive Testing & Validation</span>
              </label>
            </div>
          </div>

          <!-- Timeline -->
          <div class="mb-8">
            <label class="block text-lg font-bold text-slate-900 dark:text-white mb-4">
              Target Timeline
            </label>
            <select name="timeline" class="w-full md:w-1/2 p-3 border-2 border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white">
              <option value="">Select timeline...</option>
              <option value="rushed">Under 2 months (rush job)</option>
              <option value="normal">2-4 months (normal)</option>
              <option value="relaxed">4+ months (relaxed)</option>
            </select>
          </div>

          <!-- Results -->
          <div id="results" class="hidden">
            <div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-2xl p-8 text-white mb-8">
              <h3 class="text-2xl font-bold mb-4">Estimated Project Cost</h3>
              <div class="text-4xl font-bold mb-2" id="cost-range">$XX,XXX - $XX,XXX</div>
              <div class="text-orange-100" id="cost-description">Based on your selections</div>
            </div>

            <div class="bg-slate-50 dark:bg-slate-800 rounded-lg p-6 mb-8">
              <h4 class="font-bold text-slate-900 dark:text-white mb-3">This estimate includes:</h4>
              <ul class="space-y-2 text-slate-700 dark:text-slate-300" id="included-items">
              </ul>
            </div>

            <!-- CTA -->
            <div class="text-center">
              <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-4">
                Get a Detailed Quote
              </h3>
              <p class="text-slate-700 dark:text-slate-300 mb-6">
                This is a rough estimate. For a detailed quote based on your specific requirements, let's talk.
              </p>
              <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a
                  href="/quote"
                  class="bg-orange-500 text-white px-8 py-4 rounded-lg font-bold hover:bg-orange-600 transition-colors"
                >
                  Get Detailed Quote
                </a>
                <a
                  href="tel:+14242715569"
                  class="border-2 border-orange-500 text-orange-500 px-8 py-4 rounded-lg font-bold hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors"
                >
                  Call (424) 271-5569
                </a>
              </div>
            </div>
          </div>

        </div>

        <!-- Disclaimer -->
        <div class="mt-8 text-center">
          <p class="text-sm text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
            <strong>Disclaimer:</strong> This calculator provides rough estimates based on typical project parameters.
            Actual costs may vary significantly based on specific requirements, component availability,
            regulatory needs, and project scope. All estimates are for budgeting purposes only.
          </p>
        </div>

      </div>
    </div>
  </Container>
</Layout>

<style>
  .option-card.selected {
    @apply border-orange-500 bg-orange-50 dark:bg-orange-900/20;
  }

  .feature-checkbox {
    @apply w-5 h-5 text-orange-500 border-2 border-slate-300 rounded focus:ring-orange-500 focus:ring-2;
  }
</style>

<script>
  // Calculator logic
  const projectTypes = document.querySelectorAll('.project-type');
  const featureCheckboxes = document.querySelectorAll('.feature-checkbox');
  const timelineSelect = document.querySelector('select[name="timeline"]');
  const resultsDiv = document.getElementById('results');
  const costRange = document.getElementById('cost-range');
  const costDescription = document.getElementById('cost-description');
  const includedItems = document.getElementById('included-items');

  // Base costs for project types
  const baseCosts = {
    simple: { min: 2000, max: 8000, name: 'Simple Controller' },
    moderate: { min: 8000, max: 25000, name: 'Moderate Complexity' },
    complex: { min: 25000, max: 65000, name: 'Complex System' }
  };

  // Feature multipliers
  const featureMultipliers = {
    wireless: 1.3,
    battery: 1.2,
    medical: 1.8,
    industrial: 1.4,
    enclosure: 1.15,
    testing: 1.25
  };

  // Timeline multipliers
  const timelineMultipliers = {
    rushed: 1.4,
    normal: 1.0,
    relaxed: 0.95
  };

  function updateCalculation() {
    const selectedType = document.querySelector('.project-type:checked')?.value;
    const selectedFeatures = Array.from(document.querySelectorAll('.feature-checkbox:checked')).map(cb => cb.value);
    const selectedTimeline = timelineSelect.value;

    if (!selectedType) {
      resultsDiv.classList.add('hidden');
      return;
    }

    let base = baseCosts[selectedType];
    let multiplier = 1;

    // Apply feature multipliers
    selectedFeatures.forEach(feature => {
      multiplier *= featureMultipliers[feature] || 1;
    });

    // Apply timeline multiplier
    if (selectedTimeline) {
      multiplier *= timelineMultipliers[selectedTimeline] || 1;
    }

    const minCost = Math.round(base.min * multiplier);
    const maxCost = Math.round(base.max * multiplier);

    // Update display
    costRange.textContent = `$${minCost.toLocaleString()} - $${maxCost.toLocaleString()}`;
    costDescription.textContent = `${base.name} with selected features`;

    // Update included items
    const items = [
      'Requirements analysis & feasibility study',
      'Schematic design & PCB layout',
      'Firmware development & testing',
      'First article build & validation',
      'Complete documentation package'
    ];

    if (selectedFeatures.includes('wireless')) items.push('Wireless protocol implementation');
    if (selectedFeatures.includes('battery')) items.push('Power optimization & battery management');
    if (selectedFeatures.includes('medical')) items.push('Medical device compliance support');
    if (selectedFeatures.includes('industrial')) items.push('Industrial environment qualification');
    if (selectedFeatures.includes('enclosure')) items.push('Mechanical design & enclosure');
    if (selectedFeatures.includes('testing')) items.push('Extended testing & validation');

    includedItems.innerHTML = items.map(item => `<li>â€¢ ${item}</li>`).join('');

    resultsDiv.classList.remove('hidden');
  }

  // Event listeners
  projectTypes.forEach(radio => {
    radio.addEventListener('change', () => {
      // Update UI
      document.querySelectorAll('.option-card').forEach(card => {
        card.classList.remove('selected');
      });
      if (radio.checked) {
        radio.closest('label').querySelector('.option-card').classList.add('selected');
      }
      updateCalculation();
    });
  });

  featureCheckboxes.forEach(checkbox => {
    checkbox.addEventListener('change', updateCalculation);
  });

  timelineSelect.addEventListener('change', updateCalculation);
</script>