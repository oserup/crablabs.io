---
import Layout from "../layouts/Layout.astro";
import Container from "../components/Container.astro";

// Capability data organized by section
const hardware = {
  domains: ["High-speed digital", "Analog", "Power electronics", "Mixed-signal"],
  stackups: ["Rigid", "Flex", "Rigid-flex"],
  materials: ["FR-4", "Rogers", "Teflon"],
  analysis: ["Thermal", "Signal integrity", "EMI/EMC", "DFM/DFA"],
};

const firmware = {
  languages: ["C", "Rust"],
  platforms: ["FreeRTOS", "Zephyr", "Bare metal"],
  architectures: ["Cortex-M", "RISC-V", "C2000", "Xtensa"],
  connectivity: ["BLE", "WiFi", "LoRa", "Thread", "Cellular"],
};

const lab = {
  emc: ["Shielded tent", "LISN", "TEM cell", "ESD generator", "Surge generator", "Near-field probes", "Current probes"],
  signal: ["8 GHz oscilloscope", "6 GHz spectrum analyzer", "Network analyzer", "Power analyzer", "Function generator", "Electronic load"],
  environmental: ["Thermal/humidity chamber"],
  prototyping: ["Pick and place", "SMT rework", "Reflow oven", "Stencil printer", "Microscope/inspection", "3D printing"],
};

const tools = {
  pcb: ["Altium Designer", "KiCad"],
  simulation: ["LTSpice", "ANSYS HFSS", "NGSpice", "Python scripts"],
  debug: ["JTAG probes", "SWD probes", "OpenOCD", "Logic analyzers", "Protocol sniffers"],
};

const regulatory = {
  medical: ["IEC 60601-1", "IEC 60601-1-2", "IEC 62304", "ISO 13485", "IEC 62443"],
  emcRadio: ["FCC Part 15", "CE RED", "IEC 61000", "CISPR"],
  industrial: ["UL 508A", "IEC 61508", "IEC 62443"],
};
---

<Layout
  title="Electronics Engineering Capabilities - PCB, Firmware, EMC Testing | Crab Labs"
  description="PCB design to 20 layers/10 GHz, embedded C/Rust firmware, in-house EMC pre-compliance lab. Nordic, STM32, TI. Medical and industrial certifications."
>
  <style>
    /* Page-specific styles (section styles are global) */

    /* ==========================================
       CAPABILITY GRID - 4 column cards
       ========================================== */
    .cap-grid {
      display: grid;
      gap: 1rem;
      grid-template-columns: 1fr;
    }

    @media (min-width: 640px) {
      .cap-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .cap-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .cap-grid-3 {
      grid-template-columns: 1fr;
    }

    @media (min-width: 640px) {
      .cap-grid-3 {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .cap-grid-3 {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .cap-card {
      background: #ffffff;
      border: 1px solid #e5e5e5;
      border-radius: 4px;
      padding: 1.5rem;
      transition: all 0.2s ease;
    }

    .cap-card:hover {
      border-color: var(--accent, #d4d4d4);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
    }

    .cap-card-label {
      font-family: var(--font-mono);
      font-size: 0.6875rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--accent, #737373);
      margin-bottom: 1rem;
    }

    .cap-card-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .cap-card-item {
      font-size: 0.8125rem;
      color: #525252;
      line-height: 1.5;
    }

    /* ==========================================
       SECTION TITLE WITH BADGE
       ========================================== */
    .cap-section-header {
      display: flex;
      align-items: baseline;
      gap: 0.75rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .cap-section-title {
      font-family: var(--font-display);
      font-size: 1.25rem;
      font-weight: 600;
      color: #171717;
      letter-spacing: -0.01em;
    }

    .cap-section-badge {
      font-family: var(--font-mono);
      font-size: 0.6875rem;
      font-weight: 500;
      padding: 0.25rem 0.625rem;
      border-radius: 4px;
      letter-spacing: 0.02em;
      background: var(--accent-bg, rgba(0, 0, 0, 0.05));
      color: var(--accent, #525252);
    }

    /* ==========================================
       REGULATORY STANDARDS - Tag style
       ========================================== */
    .standards-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .standard-tag {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: #525252;
      background: #fafafa;
      padding: 0.375rem 0.625rem;
      border-radius: 4px;
      border: 1px solid #e5e5e5;
    }

  </style>

  <!-- Page Header -->
  <section class="section section-gray section-first">
    <Container>
      <div class="section-header">
        <div class="section-label">Capabilities</div>
        <h1 class="section-title">What we work with</h1>
        <p class="section-subtitle">Hardware, firmware, test equipment, and regulatory standards we use daily.</p>
      </div>
    </Container>
  </section>

  <!-- Hardware -->
  <section class="section section-white" style="--accent: #ea580c; --accent-bg: rgba(234, 88, 12, 0.08);">
    <Container>
      <div class="cap-section-header">
        <h2 class="cap-section-title">Hardware</h2>
        <span class="cap-section-badge">Up to 20 layers, 10 GHz</span>
      </div>

      <div class="cap-grid">
        <div class="cap-card">
          <div class="cap-card-label">Domains</div>
          <ul class="cap-card-list">
            {hardware.domains.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Stack-ups</div>
          <ul class="cap-card-list">
            {hardware.stackups.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Materials</div>
          <ul class="cap-card-list">
            {hardware.materials.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Analysis</div>
          <ul class="cap-card-list">
            {hardware.analysis.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
      </div>
    </Container>
  </section>

  <!-- Firmware -->
  <section class="section section-gray" style="--accent: #3b82f6; --accent-bg: rgba(59, 130, 246, 0.08);">
    <Container>
      <div class="cap-section-header">
        <h2 class="cap-section-title">Firmware</h2>
      </div>

      <div class="cap-grid">
        <div class="cap-card">
          <div class="cap-card-label">Languages</div>
          <ul class="cap-card-list">
            {firmware.languages.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Platforms</div>
          <ul class="cap-card-list">
            {firmware.platforms.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Architectures</div>
          <ul class="cap-card-list">
            {firmware.architectures.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Connectivity</div>
          <ul class="cap-card-list">
            {firmware.connectivity.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
      </div>
    </Container>
  </section>

  <!-- Lab Equipment -->
  <section class="section section-white" style="--accent: #16a34a; --accent-bg: rgba(22, 163, 74, 0.08);">
    <Container>
      <div class="cap-section-header">
        <h2 class="cap-section-title">Lab Equipment</h2>
        <span class="cap-section-badge">In-house, Long Beach</span>
      </div>

      <div class="cap-grid">
        <div class="cap-card">
          <div class="cap-card-label">EMC</div>
          <ul class="cap-card-list">
            {lab.emc.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Signal</div>
          <ul class="cap-card-list">
            {lab.signal.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Environmental</div>
          <ul class="cap-card-list">
            {lab.environmental.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Prototyping</div>
          <ul class="cap-card-list">
            {lab.prototyping.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
      </div>
    </Container>
  </section>

  <!-- Software Tools -->
  <section class="section section-gray" style="--accent: #8b5cf6; --accent-bg: rgba(139, 92, 246, 0.08);">
    <Container>
      <div class="cap-section-header">
        <h2 class="cap-section-title">Software Tools</h2>
      </div>

      <div class="cap-grid cap-grid-3">
        <div class="cap-card">
          <div class="cap-card-label">PCB Design</div>
          <ul class="cap-card-list">
            {tools.pcb.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Simulation</div>
          <ul class="cap-card-list">
            {tools.simulation.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Debug</div>
          <ul class="cap-card-list">
            {tools.debug.map((item) => <li class="cap-card-item">{item}</li>)}
          </ul>
        </div>
      </div>
    </Container>
  </section>

  <!-- Regulatory Standards -->
  <section class="section section-white" style="--accent: #d97706; --accent-bg: rgba(217, 119, 6, 0.08);">
    <Container>
      <div class="cap-section-header">
        <h2 class="cap-section-title">Regulatory Standards</h2>
      </div>

      <div class="cap-grid cap-grid-3">
        <div class="cap-card">
          <div class="cap-card-label">Medical</div>
          <div class="standards-list">
            {regulatory.medical.map((item) => <span class="standard-tag">{item}</span>)}
          </div>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">EMC / Radio</div>
          <div class="standards-list">
            {regulatory.emcRadio.map((item) => <span class="standard-tag">{item}</span>)}
          </div>
        </div>
        <div class="cap-card">
          <div class="cap-card-label">Industrial</div>
          <div class="standards-list">
            {regulatory.industrial.map((item) => <span class="standard-tag">{item}</span>)}
          </div>
        </div>
      </div>

      <a href="/services" class="section-link">
        View our services
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
        </svg>
      </a>
    </Container>
  </section>
</Layout>
