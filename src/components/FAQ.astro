---
/**
 * FAQ - Accordion FAQ component using Preline UI
 *
 * Props:
 * - items: Array of { question, answer } objects
 * - color?: Color variant matching service sections
 * - id?: Unique ID for accordion group
 */

interface FAQItem {
  question: string;
  answer: string;
}

interface Props {
  items: FAQItem[];
  color?: 'brand' | 'amber' | 'green' | 'purple';
  id?: string;
}

const { items, color = 'brand', id = `faq-${Math.random().toString(36).slice(2, 9)}` } = Astro.props;

const colorClasses = {
  brand: {
    border: 'border-brand-200',
    activeBg: 'bg-brand-50',
    icon: 'text-brand-600',
    hover: 'hover:bg-brand-50/50',
  },
  amber: {
    border: 'border-amber-200',
    activeBg: 'bg-amber-50',
    icon: 'text-amber-600',
    hover: 'hover:bg-amber-50/50',
  },
  green: {
    border: 'border-green-200',
    activeBg: 'bg-green-50',
    icon: 'text-green-600',
    hover: 'hover:bg-green-50/50',
  },
  purple: {
    border: 'border-purple-200',
    activeBg: 'bg-purple-50',
    icon: 'text-purple-600',
    hover: 'hover:bg-purple-50/50',
  },
};

const classes = colorClasses[color];
---

<div class="hs-accordion-group" data-hs-accordion-always-open>
  {items.map((item, index) => (
    <div
      class={`hs-accordion border ${classes.border} rounded-lg mb-2 ${index === 0 ? 'active' : ''}`}
      id={`${id}-${index}`}
    >
      <button
        class={`hs-accordion-toggle group py-4 px-5 inline-flex items-center justify-between gap-x-3 w-full font-medium text-left text-neutral-800 transition ${classes.hover} rounded-lg focus-visible:outline-2 focus-visible:outline-brand-500 focus-visible:outline-offset-2`}
        aria-controls={`${id}-collapse-${index}`}
        aria-expanded={index === 0 ? 'true' : 'false'}
      >
        <span class="text-sm">{item.question}</span>
        <svg
          class={`hs-accordion-active:hidden block flex-shrink-0 w-4 h-4 ${classes.icon}`}
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="m6 9 6 6 6-6"/>
        </svg>
        <svg
          class={`hs-accordion-active:block hidden flex-shrink-0 w-4 h-4 ${classes.icon}`}
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="m18 15-6-6-6 6"/>
        </svg>
      </button>
      <div
        id={`${id}-collapse-${index}`}
        class={`hs-accordion-content ${index === 0 ? '' : 'hidden'} w-full overflow-hidden transition-[height] duration-300`}
        aria-labelledby={`${id}-${index}`}
      >
        <div class="px-5 pb-4">
          <p class="text-sm text-neutral-600 leading-relaxed">{item.answer}</p>
        </div>
      </div>
    </div>
  ))}
</div>
