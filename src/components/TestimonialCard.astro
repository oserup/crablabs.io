---
/**
 * TestimonialCard - Display client testimonials
 *
 * Props:
 * - quote: The testimonial text
 * - author: Name of the person
 * - role: Their job title
 * - company: Company name
 * - logo?: Optional company logo path
 * - variant: 'featured' (homepage), 'default' (case studies), 'compact' (sidebar)
 */

interface Props {
  quote: string;
  author: string;
  role: string;
  company: string;
  logo?: string;
  variant?: 'featured' | 'default' | 'compact';
}

const { quote, author, role, company, logo, variant = 'default' } = Astro.props;

const variantStyles = {
  featured: {
    wrapper: 'bg-neutral-900 border border-neutral-800 rounded-xl p-8',
    quote: 'text-xl lg:text-2xl text-neutral-300 mb-6',
    author: 'text-sm font-medium text-white',
    meta: 'text-sm text-neutral-500',
  },
  default: {
    wrapper: 'bg-white border border-neutral-200 rounded-lg p-6',
    quote: 'text-base text-neutral-600 mb-4 italic',
    author: 'text-sm font-medium text-neutral-900',
    meta: 'text-sm text-neutral-500',
  },
  compact: {
    wrapper: 'bg-neutral-50 border border-neutral-200 rounded-lg p-4',
    quote: 'text-sm text-neutral-600 mb-3 italic',
    author: 'text-xs font-medium text-neutral-900',
    meta: 'text-xs text-neutral-500',
  },
};

const styles = variantStyles[variant];
---

<div class={styles.wrapper}>
  <blockquote class={styles.quote}>
    {variant === 'featured' ? (
      <span class="text-center block">"{quote}"</span>
    ) : (
      <span>"{quote}"</span>
    )}
  </blockquote>

  <div class={variant === 'featured' ? 'flex items-center justify-center gap-4' : 'flex items-center gap-3'}>
    {logo && (
      <img
        src={logo}
        alt={company}
        class={variant === 'compact' ? 'h-6 w-auto opacity-80' : 'h-8 w-auto opacity-80'}
        loading="lazy"
      />
    )}
    <div class={variant === 'featured' ? 'text-left' : ''}>
      <p class={styles.author}>{author}</p>
      <p class={styles.meta}>{role}, {company}</p>
    </div>
  </div>
</div>
